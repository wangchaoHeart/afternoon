"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[355],{78506:function(I,d,e){e.r(d),e.d(d,{default:function(){return F}});var T=e(26068),u=e.n(T),C=e(90228),E=e.n(C),S=e(87999),B=e.n(S),y=e(48305),l=e.n(y),s=e(75271),D=e(40297),U=e(38333),A=e(8797),L=e(63710),R=e(67251),j=e(82661),b=e(70606),K=e(82566),W=e(35904),x=e(11333),_e=e.n(x),i=e(56648),n=e(52676),Z=D.Z.Title,h=D.Z.Text;function F(){var Y=(0,s.useState)([]),v=l()(Y,2),z=v[0],V=v[1],w=(0,s.useState)(0),p=l()(w,2),N=p[0],G=p[1],H=(0,s.useState)(!1),f=l()(H,2),Q=f[0],O=f[1],X=(0,s.useState)({current:1,pageSize:10}),P=l()(X,2),r=P[0],c=P[1],$=(0,s.useState)(null),g=l()($,2),m=g[0],M=g[1];(0,s.useEffect)(function(){k()},[r.current,r.pageSize,m]);var k=function(){var a=B()(E()().mark(function t(){var o;return E()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,O(!0),_.next=4,(0,W.A)({page:r.current,pageSize:r.pageSize,date:m?m.format("YYYY-MM-DD"):null});case 4:o=_.sent,V(o.voters),G(o.total),_.next=13;break;case 9:_.prev=9,_.t0=_.catch(0),console.error("\u83B7\u53D6\u6295\u7968\u8005\u4FE1\u606F\u5931\u8D25:",_.t0),U.ZP.error("\u83B7\u53D6\u6295\u7968\u8005\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5");case 13:return _.prev=13,O(!1),_.finish(13);case 16:case"end":return _.stop()}},t,null,[[0,9,13,16]])}));return function(){return a.apply(this,arguments)}}(),J=function(t){c({current:t.current,pageSize:t.pageSize})},q=function(t){M(t),c(u()(u()({},r),{},{current:1}))},ee=function(){M(null),c(u()(u()({},r),{},{current:1}))},te=[{title:"\u7528\u6237ID",dataIndex:"userId",key:"userId",ellipsis:!0},{title:"\u6295\u7968\u65E5\u671F",dataIndex:"date",key:"date",sorter:function(t,o){return new Date(o.date)-new Date(t.date)},render:function(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}},{title:"\u6295\u7968\u9009\u9879",dataIndex:"option",key:"option"},{title:"IP \u5730\u5740",dataIndex:"ip",key:"ip"},{title:"\u6295\u7968\u65F6\u95F4",dataIndex:"timestamp",key:"timestamp",sorter:function(t,o){return new Date(t.timestamp)-new Date(o.timestamp)},render:function(t){return new Date(t).toLocaleString()}},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",key:"browser"},{title:"\u64CD\u4F5C\u7CFB\u7EDF",dataIndex:"os",key:"os"},{title:"\u8BBE\u5907",dataIndex:"device",key:"device"},{title:"User-Agent",dataIndex:"ua",key:"ua",ellipsis:!0}];return(0,n.jsx)("div",{style:{padding:"20px"},children:(0,n.jsxs)(A.Z,{className:i.Z.card,children:[(0,n.jsx)(Z,{level:2,className:i.Z.title,children:"\u6295\u7968\u8005\u5217\u8868"}),(0,n.jsxs)(L.Z,{style:{marginBottom:16},children:[(0,n.jsx)(h,{children:"\u6309\u65E5\u671F\u8FC7\u6EE4\uFF1A"}),(0,n.jsx)(R.Z,{value:m,onChange:q,format:"YYYY-MM-DD",placeholder:"\u9009\u62E9\u65E5\u671F"}),(0,n.jsx)(j.ZP,{onClick:ee,children:"\u91CD\u7F6E\u8FC7\u6EE4"})]}),Q?(0,n.jsxs)("div",{className:i.Z.loading,children:[(0,n.jsx)(b.Z,{size:"large"}),(0,n.jsx)(h,{className:i.Z.loadingText,children:"\u52A0\u8F7D\u4E2D..."})]}):(0,n.jsx)(K.Z,{columns:te,dataSource:z,rowKey:"userId",pagination:{current:r.current,pageSize:r.pageSize,total:N,showSizeChanger:!0,pageSizeOptions:["10","20","50"],showTotal:function(t){return"\u5171 ".concat(t," \u6761\u8BB0\u5F55")}},onChange:J,scroll:{x:1500}})]})})}},56648:function(I,d){d.Z={container:"container___lGekF",card:"card___ZgVDF",title:"title___nwRif",tabs:"tabs___LxTFv",dateInfo:"dateInfo___mun5Z",loading:"loading___v87br",loadingText:"loadingText___eet6k",results:"results___cVIlX",voteSection:"voteSection___gBRl3",radioGroup:"radioGroup___Nkqxl",optionItem:"optionItem___k9QgT",radioOption:"radioOption___Pm5Mm",deleteBtn:"deleteBtn___tYsTG",voteButton:"voteButton___Hf89i",addSection:"addSection___jmLac",thankYou:"thankYou___BQFDN",historyContainer:"historyContainer___Q7Zsd",historyItem:"historyItem___YY_Hj",emptyOptions:"emptyOptions___ywXqh",emptyHistory:"emptyHistory___o9bAS",voterInfo:"voterInfo___n0FwQ",header:"header___Peyd6",viewVotersButton:"viewVotersButton___hZCOe"}}}]);
